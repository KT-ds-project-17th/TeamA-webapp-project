<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
<mapper namespace="mapper.partner"> 
	<resultMap id="resResult" type="partnerVO">
		<result property="partnerLicenseNum" column="partnerLicenseNum" />
	    <result property="partnerState" column="partnerState" />
	    <result property="partnerName" column="partnerName" />
	    <result property="partnerInformation" column="partnerInformation" />
	    <result property="partnerAddress" column="partnerAddress" />
	    <result property="partnerPhoneNumber" column="partnerPhoneNumber" />
	    <result property="partnerEmail" column="partnerEmail" />
	    <result property="partnerCEO" column="partnerCEO" />
	    <result property="partnerHeadCount" column="partnerHeadCount" />
	    <result property="partnerApplyYN" column="partnerApplyYN" />
	    <result property="partnerApplyFinishDate" column="partnerApplyFinishDate" />
	    <result property="partnerURL" column="partnerURL" />
	    <result property="partnerRegisterDate" column="partnerRegisterDate" />
	    
	    <result property="partnerIndustryType" column="partnerIndustryType" />
	    <result property="partnerCharger" column="partnerCharger" />
	    <result property="partnerChargerDepartment" column="partnerChargerDepartment" />
	    <result property="partnerChargerID" column="partnerChargerID" />
	    <result property="partnerChargerEmail" column="partnerChargerEmail" />
	</resultMap>
	
	
	<!-- select all -->
	<select  id="selectAllPartnerList" resultMap="resResult" >
      <![CDATA[
         select partnerLicenseNum, partnerState, partnerName,partnerAddress ,partnerCharger, partnerCEO,partnerHeadCount,partnerURL,partnerChargerID, partnerChargerDepartment,partnerIndustryType, partnerChargerEmail,partnerPhoneNumber, to_char(partnerRegisterDate, 'yyyy-mm-dd') as "partnerRegisterDate"
         from partner 
         where partnerLicenseNum != 'kt_ds_university'
      ]]>
	</select>	
	
	<select  id="selectAllPartnerList2" resultMap="resResult" >
      <![CDATA[
         select *
         from partner 
         where partnerLicenseNum != 'kt_ds_university'
      ]]>
	</select>	
	
	<!--협력사 count 조회 쿼리 -->
	<select id="selectCooperationPartner" resultType="int">
      <![CDATA[
        select count(*) from partner
		where partnerState = '협력사'	 	
      ]]>
	</select>
	
	<!--협약사 count 조회 쿼리 -->
	<select id="selectConventionPartner" resultType="int">
      <![CDATA[
        select count(*) from partner
		where partnerState = '협약사'	 	
      ]]>
	</select>
	
	<!--협약 진행중 count 조회 쿼리 -->
	<select id="selectIngPartner" resultType="int">
      <![CDATA[
        select count(*) from partner
		where partnerState = '협약 진행중'	 	
      ]]>
	</select>
	
	<!--미협약 count 조회 쿼리 -->
	<select id="selectNotPartner" resultType="int">
      <![CDATA[
        select count(*) from partner
		where partnerState = '미협약'	 	
      ]]>
	</select>
	
	
	<!--기업 정보 입력 쿼리 -->
	<insert id="addPartner" parameterType="partnerVO">
	<![CDATA[
        insert into partner(partnerLicenseNum,partnerState,partnerName,partnerAddress,partnerPhoneNumber,partnerCEO,partnerHeadCount,partnerApplyYN,partnerApplyFinishDate,partnerURL,partnerRegisterDate, partnerIndustryType, partnerCharger,partnerChargerDepartment, partnerChargerID, partnerChargerEmail)
		values(#{partnerLicenseNum},#{partnerState},#{partnerName},#{partnerAddress},#{partnerPhoneNumber},#{partnerCEO},#{partnerHeadCount},'N',#{partnerApplyFinishDate, jdbcType=DATE},#{partnerURL}, sysdate ,#{partnerIndustryType}, #{partnerCharger}, #{partnerChargerDepartment},#{partnerChargerID},#{partnerChargerEmail})
      ]]>
	</insert>
	
	<!--기업 상세 정보 쿼리 -->
	<select id="selectDetailPartner" parameterType="String" resultType="partnerVO">
		<![CDATA[
        select *
        from partner
        where partnerLicenseNum=#{partnerLicenseNum}	 	
      ]]>
	
	</select>
	
	<!--기업 정보 업데이트 쿼리 -->
	<update id="updatePartner" parameterType="partnerVO">
	<![CDATA[
        update partner
        set  partnerState=#{partnerState}, partnerAddress=#{partnerAddress}, partnerPhoneNumber=#{partnerPhoneNumber}, partnerInformation=#{partnerInformation, jdbcType=VARCHAR}, partnerEmail=#{partnerEmail, jdbcType=VARCHAR}, partnerCEO=#{partnerCEO}, partnerHeadCount=#{partnerHeadCount}, partnerApplyFinishDate=#{partnerApplyFinishDate, jdbcType=DATE}, partnerRegisterDate= sysdate, partnerIndustryType=#{partnerIndustryType}, partnerCharger=#{partnerCharger}, partnerChargerDepartment=#{partnerChargerDepartment}, partnerChargerID=#{partnerChargerID}, partnerChargerEmail=#{partnerChargerEmail} 
        where partnerLicenseNum=#{partnerLicenseNum}      
      ]]>
	</update>
	
	<!--기업 삭제 쿼리 -->
	<delete id="deletePartner" parameterType="String">
	<![CDATA[
       delete from partner
	   where
       partnerLicenseNum=#{partnerLicenseNum}   
      ]]>
	</delete>
	
	<!-- 기업 이름 불러오는 쿼리 -->
	<select id="partnerName" parameterType="String" resultType="String">
      <![CDATA[
        select partnerName 
        from partner
		where partnerLicenseNum=#{partnerLicenseNum}   	
      ]]>
	</select>
	
</mapper>